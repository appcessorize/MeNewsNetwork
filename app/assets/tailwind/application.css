@import "tailwindcss";
@source not "./daisyui{,*}.mjs";
@plugin "./daisyui.mjs";

@layer components {
  .btn-cf {
    @apply btn btn-warning text-white;
  }

  .panel-title {
    @apply text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2;
  }

  .mono-panel {
    @apply font-mono text-xs leading-relaxed bg-base-100 border border-base-300 rounded-box p-4 overflow-y-auto whitespace-pre-wrap break-words;
  }

  .weather-card {
    @apply rounded-xl border border-base-300 p-6 text-base-content;
    background: linear-gradient(135deg, #dbeafe, #ede9fe);
  }

  .weather-loading {
    @apply text-center text-base-content/60 py-8 text-sm;
  }

  .weather-headline {
    @apply text-base font-semibold mb-5 text-center;
  }

  .weather-current {
    @apply flex items-center gap-5 mb-6 pb-5 border-b border-black/10;
  }

  .current-emoji {
    @apply text-6xl leading-none;
  }

  .current-temp {
    @apply text-4xl font-bold tracking-tight;
  }

  .current-summary {
    @apply text-sm text-base-content/70 mt-0.5;
  }

  .current-details {
    @apply flex gap-4 mt-1.5 text-xs text-base-content/50;
  }

  .forecast-grid {
    @apply grid grid-cols-[repeat(auto-fit,minmax(140px,1fr))] gap-3 mb-5;
  }

  .forecast-day {
    @apply bg-white/60 rounded-lg p-3 text-center;
  }

  .forecast-day-name {
    @apply text-xs font-semibold uppercase tracking-wider text-slate-600;
  }

  .forecast-day-emoji {
    @apply text-3xl my-1;
  }

  .forecast-temps {
    @apply text-sm font-semibold;
  }

  .temp-high {
    @apply text-red-600;
  }

  .temp-low {
    @apply text-blue-600 ml-1.5;
  }

  .forecast-summary {
    @apply text-[0.72rem] text-slate-500 mt-1;
  }

  .weather-advice {
    @apply text-center text-sm italic text-slate-600 pt-1;
  }

  /* iMessage-style chat bubbles */
  .imessage-sent {
    background-color: #007AFF !important;
    color: #fff !important;
  }

  .imessage-received {
    background-color: #E9E9EB !important;
    color: #1c1c1e !important;
  }

  /* Chat page layout */
  .chat-page {
    display: flex;
    flex-direction: column;
    height: 100dvh;
    height: 100vh; /* fallback */
    overflow: hidden;
    background-color: oklch(var(--b1));
  }

  .chat-header {
    @apply flex items-center gap-3 px-4 py-3 border-b border-base-300 bg-base-100/95 backdrop-blur-sm shrink-0;
    padding-top: env(safe-area-inset-top, 0px);
  }

  .chat-scroll {
    @apply flex-1 overflow-y-auto overscroll-contain p-4 space-y-1;
    -webkit-overflow-scrolling: touch;
  }

  .chat-input-bar {
    @apply border-t border-base-300 bg-base-100 px-3 py-2 shrink-0;
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 0.5rem);
  }

  .chat-textarea {
    @apply w-full bg-base-200 rounded-2xl px-4 py-2 text-sm resize-none leading-snug;
    max-height: 100px;
    min-height: 36px;
    outline: none;
    border: none;
    field-sizing: content;
  }

  .media-btn {
    @apply flex items-center justify-center rounded-full text-base-content/60 shrink-0;
    width: 36px;
    height: 36px;
    min-width: 36px;
    -webkit-tap-highlight-color: transparent;
  }
  .media-btn:active {
    @apply bg-base-200;
  }

  .media-btn-send {
    @apply bg-[#007AFF] text-white;
  }
  .media-btn-send:active {
    @apply bg-[#0066DD];
  }

  .media-btn-mic.recording {
    @apply text-error;
  }

  /* Recording pulse indicator */
  .recording-pulse {
    @apply inline-block w-3 h-3 rounded-full bg-error;
    animation: pulse-recording 1s ease-in-out infinite;
  }

  @keyframes pulse-recording {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.85); }
  }

  /* Media preview in chat */
  .chat-media-preview {
    @apply rounded-xl overflow-hidden max-w-[240px];
  }
  .chat-media-preview img,
  .chat-media-preview video {
    @apply w-full h-auto block;
    max-height: 200px;
    object-fit: cover;
  }

  /* Member pill for commenter suggestions */
  .member-pill {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-full bg-base-200 text-sm cursor-pointer transition-colors;
    -webkit-tap-highlight-color: transparent;
  }
  .member-pill:hover {
    @apply bg-base-300;
  }
  .member-pill.selected {
    @apply bg-primary text-primary-content;
  }

  /* News item card in chat */
  .news-card-bubble {
    @apply bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 max-w-[300px];
  }
  .news-card-bubble h3 {
    @apply font-bold text-sm mb-2;
  }
  .news-card-bubble p {
    @apply text-xs text-base-content/80 leading-relaxed;
  }
}

/* View Transitions */
::view-transition-old(page-content) {
  animation: fade-and-slide-out 0.25s ease-in forwards;
}

::view-transition-new(page-content) {
  animation: fade-and-slide-in 0.25s ease-out forwards;
}

@keyframes fade-and-slide-out {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(-30px); }
}

@keyframes fade-and-slide-in {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Scrollbar styling */
pre::-webkit-scrollbar {
  width: 6px;
}
pre::-webkit-scrollbar-track {
  background: transparent;
}
pre::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}
